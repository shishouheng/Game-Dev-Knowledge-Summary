
Bresenham算法是一种用于在二维图形中绘制直线的整数算法。由Jack Bresenham在1962年发明，主要用于在计算机图形学中，解决了低分辨率显示器上高效绘制直线的问题。这个算法的主要优点是只使用整数计算，因此速度快且高效。


## 1.原理简介：

我们在纸上画直线时，只需要定一个起点和终点，然后把两点连接起来就是一条直线，但是这个过程在计算机上并不能这么直接实现。如下所示屏幕是由一个一个像素点组成，想要在屏幕上画出一条直线就要把特定位置的像素点设置为直线的颜色，然后当屏幕的分辨率高到一定程度时这些像素点组成的图形就势一条直线。


![[PCLEDScreen.png]]

直线的表达式为y=kx+b,所以最简单的绘制直线的方法就是计算出b和斜率k，然后将自变量的x取值带入到公示中，得到y的对应取值，在绘制到屏幕上时，通过四舍五入的方法确定具体的像素点就可以了。

但是这样有一些问题，这种计算步骤中涉及到了浮点数乘除法，它的效率是很低的。Bresenham算法就解决了这一问题，它的计算中不存在任何浮点数，甚至不存在整数的乘除法，只存在整数的加减位移运算


## 2.算法流程

先讨论在第一象限，同时斜率存在且大于0小于1，并且起点的x，y均小于终点的x，y这种情况

![[bresenham.png]]

假设我们要绘制如上图所示直线f(x,y),它的起点在($x_k, y_k$ )，上图中的每个圈就是一个像素点，首先肯定要点亮($x_k,y_k$)的像素点，因为这是线段的起点，那么下一个像素点应该用哪个呢，观察上图可以发现，下一个像素点应该是($x_k+1,y_k$)和($x_k+1,y_k+1$)中的一个，那究竟选择哪一个呢？一个很朴素的想法就是谁在y方向上离直线最近，那就使用哪个像素点。这个想法也正是bresenham算法的核心。

即然已经可以确定思路了，那么下一步可以尝试使用数学公式来表示这个过程了。

对于上图，直线与($x_k+1,y_k$)和($x_k+1,y_k+1$)连线的交点，如果在连线的上一半，那就选择
($x_k+1,y_k+1$)，如果在连线的下一半则选择($x_k+1,y_k$)。

那么，我们只需要将连线的中点坐标（$x_k+1, y_k + \frac{1}{2}$)带入到直线函数f(x,y)中

- 如果f($x_k+1, y_k + \frac{1}{2}$)>0,说明直线的交点在($x_k+1, y_k + \frac{1}{2}$)的下面，此时需要点亮($x_k+1,y_k$)
- 如果f($x_k+1, y_k + \frac{1}{2}$)<0,则说明直线的交点在($x_k+1, y_k + \frac{1}{2}$)的上面，此时需点亮($x_k+1,y_k+1$)