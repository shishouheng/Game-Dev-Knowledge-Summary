
大世界类型的游戏相比于一般类型游戏需要更加有效的优化方式，因为会涉及到更加庞大的场景和复杂的逻辑，而要在手机上能够流畅游玩就需要对性能和内存进行优化，避免卡顿、闪退等情况。


# 1.多层级细节
##  1.1 Lod(Level Of Detail)



LOD是一种根据对象与摄像机之间的距离来选择不同细节级别的技术，对象越远，使用的模型精度越低，以减少渲染计算。
在使用LOD时需要为每个模型添加多个不同精度的模型，然后根据对象的远近来确定使用哪一种精度的模型，可以显著的降低渲染压力，但同时会增加游戏的内存开销


# 1.2 HLOD(Hierarchy Level Of Detail)

HLOD是对LOD的一种扩展，更适合于大型场景的多个对象，通过将多个对象组合成一个更简化的模型来进一步优化渲染。
其特点是会将场景分割为层次结构，包含多个对象的组，然后会根据相机距离，动态调整整个组的细节级别，当整个组原理相机时，使用简化版本的整个组模型，而不是每个单独的对象。


## 1.3 LOD与HLOD的区别及应用场景

- 粒度：
	- LOD处理单个对象的细节级别变化
	- HLOD处理多个对象组合的整体细节级别变化
- 复杂度：
	- LOD实现较为简单，Unity有默认的实现，而且只需管理单个对象的不同细节级别
	- HLOD更复杂，需要管理对象组和生成层次结构的组合模型
- 应用场景：
	- LOD更适合用于单个对象或少量对象的细节优化
	- HLOD更适合用于大型场景的全局优化，特别是场景中包含大量对象时
- 渲染性能：
	- LOD通过减少单个对象的多边形数来提升性能
	- HLOD通过减少整个对象组的多边形数和绘制调用来大幅提升性能




# 2. 遮挡剔除

## 2.1  Portals Culling(入口剔除)

是一种基于分区的可见性剔除方案，通常与室内场景结合使用。它依赖于场景被划分为多个房间，这些房间通过portals(门户)连接。

这种方案首先会在运行前将场景划分为多个房间或区域，每个房间被称为一个cell，然后会定义门户，即连接两个cell之间的视野通道，然后在运行时实时的根据摄像机位置和视角进行计算，决定哪些房间和对象是可见的。




## 2.2 Potentially Visible Set(潜在可见集)

是一种离线的场景剔除方案，即在开发阶段就生成PVS(潜在可见集)并存储下来，运行时只需要付出查表的开销，性能损失几乎为0，但会增加内存开销

这种方案首先会将场景划分为若干个区域或区块，然后使用视锥体或光线投射等技术从每个区域计算其潜在可见集，然后将每个区域的PVS数据存储在一个数据结构中。当游戏运行时会根据摄像机的位置确定其所在的区域，然后从预计算的PVS数据中查找当前区域的潜在可见集，然后剔除其他不在PVS集合中的对象和区域


## 2.3   Portals Culling 和 Potentially Visible Set的区别和应用场景

1.计算时机：
- Portals Culling:在运行时实时计算可见性
- PVS：在开发阶段预计算可见性

2.应用场景：
- Portals Culling：适合室内、复杂区域划分且通道明确的场景
- PVS：适合大型、开放且结构相对固定的场景

3.灵活性：
- Portals Culling：更灵活，适合实时变化的场景
- PVS：效率更高，但是缺乏灵活性，适合静态场景

