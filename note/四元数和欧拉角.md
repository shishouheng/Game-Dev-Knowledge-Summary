# 四元数和欧拉角

## Unity中的旋转：

在unity中旋转都是用四元数来表示的，但是由于四元数不够直观且难于理解，所以在游戏物体的inspector面板会将用四元数表示的旋转信息转换为欧拉角来表示，方便用户直观的调整物体的旋转（用户调整完欧拉角后unity又会将这个欧拉角表示的旋转信息转换为四元数）。

## 万向节锁现象：

欧拉角表示旋转的时候旋转顺序很重要，假如希望x轴旋转50°，y轴旋转60°，z轴旋转20°，按照先旋转x轴——旋转y轴——旋转z轴和先旋转y轴——旋转z轴——旋转x轴会得到不同的旋转结果。所以可以说当使用欧拉角描述物体的旋转时除了三个轴的参数之外还必须指定旋转顺序才能完整的描述一个欧拉角。

在欧拉角中还存在一个特点，在前面转动的轴会带动后面的轴跟着转动，而在后面转动的轴不会影响到前面的轴，所以当绕顺序在中间的轴转动90°时，最先转动的轴和最后转动的轴就重合了，此时围绕这两个轴所做的旋转效果也就一样，丢失了一个自由度

例：可以在unity  scene中可以创建一个cube，由于unity中默认的旋转轴顺序是z-x-y，将它在中间的轴也就是x轴的旋转值设置为90°，此时物体的y轴就会和z轴重合，这个时候无论调整y轴的旋转轴还是z轴的旋转值都只有在y轴旋转的效果，也就是丢失了z轴的旋转维度

具体可参考b站的这个视频，说的贼详细

[无伤理解欧拉角中的“万向死锁”现象_哔哩哔哩_bilibili](https://www.bilibili.com/video/BV1Nr4y1j7kn/?spm_id_from=333.337.search-card.all.click&vd_source=1fd51ecd10487bb45073ef384c5507a8)

## 四元数：

所以为了避免发生万向节锁的问题，unity中默认使用四元数来代替欧拉角表示旋转，这样不仅可以避免发生万向节锁的现象，而且计算效率相比欧拉角更高

## 旋转相关API：

### 欧拉角转四元数

```
public static Quaternion Euler(float x, float y, float z)
```

传入一个欧拉角并返回这个欧拉角对应的四元数实例

### 绕目标点旋转

```
public void RotateAround(Vector3 point, Vector3 axis, float angle)
```

传入point中心点的vector3坐标以及axis旋转轴，和angle旋转角度，然后就可以让物体围绕一个指定点进行旋转

### 案例：

按下A键使物体向左旋转，按下D键使物体向右旋转，同时物体左右旋转的角度均为60°

```

```
